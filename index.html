<!DOCTYPE html>
<html>
<head>
    <title>COVID-19 Self-Declaration System</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <!--First section-->
    <header>
        <h1><strong>UNIMAS HEALTH CENTRE</strong></h1>
    </header>
    <br><br>

    <h2>COVID-19 SELF-DECLARATION FORM</h2>
    <p>Please fill out the following form completely</p>
    <br><br>

    <!--Start of second section-->
    <h3>PERSONAL INFORMATION</h3>
        <label>Name:</label> <input id="name" type ="text" required><br>
        <label>Staff/Student/Visitor:</label>
            <select id ="people">
                <option value = "Staff">Staff</option>
                <option value = "Student">Student</option>
                <option value = "Visitor">visitor</option></select>
        <label>Stafff ID/Student Matric No.:</label> <input id="ID" type ="text" required><br><br>
        <label>IC/Passport No.:</label> <input id="IC" type ="text" required><br><br>
        <label>Gender:</label>
        <select id ="gender">
            <option value = "Male">Male</option>
            <option value = "Female">Female</option></select>
        <label>Age:</label> <input id="age" type ="number" required>
        <label>Contact Number:</label> <input id="phone" type ="number" required><br><br>
        <label>Address:</label><p> <textarea id="address" name="address" cols="60" rows="5" required></textarea></p>

    <!--Submit form-->
        <hr>
        <button id = "submit">SUBMIT</button>

        <!---Import and configuration setting---->
        <script type="module">
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.0/firebase-app.js";
            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries
        
            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            const firebaseConfig = {
            apiKey: "AIzaSyA0exVFI-s2xuR-x9h_nDbYjit7GqViQas",
            authDomain: "selfdeclarationsystem.firebaseapp.com",
            projectId: "selfdeclarationsystem",
            storageBucket: "selfdeclarationsystem.appspot.com",
            messagingSenderId: "432346174932",
            appId: "1:432346174932:web:dfbf0b700013819b3ff241",
            };
        
            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
        
            import {getDatabase, ref, set, child, update, remove} from "https://www.gstatic.com/firebasejs/9.6.0/firebase-database.js"
            
            const db = getDatabase();

            // Reference 
            var name = document.getElementById("name");
            var people = document.getElementById("people");
            var matrix = document.getElementById("ID");
            var ID = document.getElementById("IC");
            var gender = document.getElementById("gender");
            var age = document.getElementById("age");
            var phone = document.getElementById("phone");
            var address = document.getElementById("address");

            var submit = document.getElementById("submit")

            //Data function

            function InsertData(){
                set(ref(db, "People/"+ people.value),{
                    Name: name.value,
                    People: people.value,
                    ID: ID.value,
                    IC: IC.value,
                    Gender: gender.value,
                    Age: age.value,
                    Contact: phone.value,
                    Address: address.value
                })
                .then(()=>{
                    alert("data stored successfully");
                })
                .catch((error)=>{
                    alert("unsuccessful, error"+error);
               });
            }

            //Assign events to button
            submit.addEventListener('click',InsertData);

        </script>
    </body> 
</html>
        