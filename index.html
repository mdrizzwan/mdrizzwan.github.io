<!DOCTYPE html>
<html>
<head>
    <title>COVID-19 Self-Declaration System</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <!--First section-->
    <header>
        <h1><strong>UNIMAS HEALTH CENTRE</strong></h1>
    </header>
    <br><br>

    <h2>COVID-19 SELF-DECLARATION FORM</h2>
    <p>Please fill out the following form completely</p>
    <br><br>

    <!--Start of second section-->
    <h3>PERSONAL INFORMATION</h3>
        <label>Name:</label> <input id="name" type ="text" required><br>
        <p>    
        <label>Staff/Student/Visitor:</label>
            <select id ="people">
                <option value = "Staff">Staff</option>
                <option value = "Student">Student</option>
                <option value = "Visitor">visitor</option></select>
        </p>        
        <label>Staff ID/Student Matric No.:</label> <input id="ID" type ="text" required><br><br>
        <label>IC/Passport No.:</label> <input id="IC" type ="text" required><br><br>
        <p>
        <label>Gender:</label>
        <select id ="gender">
            <option value = "Male">Male</option>
            <option value = "Female">Female</option></select>
        </p>
        <label>Age:</label> <input id="age" type ="number" required>
        <label>Contact Number:</label> <input id="phone" type ="number" required><br><br>
        <p>
        <label>Address:</label><p> <textarea id="address" name="address" cols="60" rows="5" required></textarea></p>
        </p>
    
    <!--Risk Assessment-->
    <br>
    <br><hr>
    <h3>RISK ASSESSMENT</h3>
    <ol>
    
    <li>
        Do you have any of the following symptom?
        <p>
            <label>Fever (37.5 C or higher):</label>
            <select id ="fever">
                <option value = "Yes">Yes</option>
                <option value = "No">No</option></select>
        </p>
            <label>Cough:</label>
            <select id ="cough">
                <option value = "Yes">Yes</option>
                <option value = "No">No</option></select>
        <p>
            <label>Difficulty Breathing:</label>
            <select id ="diff">
                <option value = "Yes">Yes</option>
                <option value = "No">No</option></select>
        </p>
            <label>Loss of smell and/or taste:</label>
            <select id ="loss">
                <option value = "Yes">Yes</option>
                <option value = "No">No</option></select>
        </p></li>
    
    <li><p>
        <label>Have you attended any event/areas associated with known Covid-19 cluster?</label>
        <select id ="attend">
            <option value = "Yes">Yes</option>
            <option value = "No">No</option></select>
    </p></li>
    
    <li><p>
        <label>Have you travel to any country outside of Malaysia within 14 days before onset of symptoms?</label>
        <select id ="travel">
            <option value = "Yes">Yes</option>
            <option value = "No">No</option></select>    
    </p></li>
    
    <li><p>
        <label>Have you had close contact to confirmed or suspected case of Covid-19 within 14 days before onset of illness?</label>
        <select id ="close">
            <option value = "Yes">Yes</option>
            <option value = "No">No</option></select>
    </p></li>
    
    <li><p>
        <label>Have you completed your vaccination?</label>
        <select id ="vaccine">
            <option value = "Yes">Yes</option>
            <option value = "No">No</option></select>
    </p></li>
    </ol>

    <footer>
        <label>I hereby that all information above is true and agree to all the conditions of the form:</label>
        <input type="checkbox" id="agree" required>
    
    <!--Submit form-->
        <hr>
        <button id = "submit">SUBMIT</button>

        <!---Import and configuration setting---->
        <script type="module">
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.0/firebase-app.js";
            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries
        
            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            const firebaseConfig = {
            apiKey: "AIzaSyA0exVFI-s2xuR-x9h_nDbYjit7GqViQas",
            authDomain: "selfdeclarationsystem.firebaseapp.com",
            projectId: "selfdeclarationsystem",
            storageBucket: "selfdeclarationsystem.appspot.com",
            messagingSenderId: "432346174932",
            appId: "1:432346174932:web:dfbf0b700013819b3ff241",
            };
        
            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
        
            import {getDatabase, ref, set, child, update, remove} from "https://www.gstatic.com/firebasejs/9.6.0/firebase-database.js"
            
            const db = getDatabase();

        //Reference
            //General information
            var name = document.getElementById("name");
            var people = document.getElementById("people");
            var matrix = document.getElementById("ID");
            var ID = document.getElementById("IC");
            var gender = document.getElementById("gender");
            var age = document.getElementById("age");
            var phone = document.getElementById("phone");
            var address = document.getElementById("address");
            // Risk assessment part
            var fever = document.getElementById("fever")
            var cough = document.getElementById("cough")
            var diff = document.getElementById("diff")
            var loss = document.getElementById("loss")
            var attend = document.getElementById("attend")
            var travel = document.getElementById("travel")
            var close = document.getElementById("close")
            var vaccine = document.getElementById("vaccine")
            //Terms and condition part
            var agree = document.getElementById("agree")

            //Form submission part
            var submit = document.getElementById("submit")

            //Data function

            function InsertData(){
                set(ref(db),{
                    Name: name.value,
                    People: people.value,
                    ID: ID.value,
                    IC: IC.value,
                    Gender: gender.value,
                    Age: age.value,
                    Contact: phone.value,
                    Address: address.value,
                    Fever: fever.value,
                    Cough: cough.value,
                    Diff : diff.value,
                    Loss : loss.value,
                    Attend : attend.value,
                    Travel : travel.value,
                    Close : close.value,
                    Vaccine: vaccine.value,
                    Agree: agree.value
                })
                .then(()=>{
                    alert("data stored successfully");
                })
                .catch((error)=>{
                    alert("unsuccessful, error"+error);
               });
            }

            //Assign events to button
            submit.addEventListener('click',InsertData);

        </script>
    </body> 
</html>
        
